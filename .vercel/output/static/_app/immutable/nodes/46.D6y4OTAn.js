import{S as L,i as Q,s as F,d as p,Q as I,z as H,o as B,p as z,v as K,b as O,c as w,C as D,D as v,h as U,e as S,f as T,P as A,k as $,j as E,m as M,U as V,q as W,r as X,u as Y,a as Z,g as ee,t as te,x as ne}from"../chunks/Dl-CPQHr.js";import{e as y}from"../chunks/r7f6XsU6.js";import"../chunks/IHki7fMi.js";import{E as le}from"../chunks/DcIf67Qm.js";function R(r,a,l){const t=r.slice();return t[10]=a[l],t[12]=l,t}function j(r,a,l){const t=r.slice();return t[10]=a[l],t[12]=l,t}function q(r){let a,l,t;return l=new le({}),l.$on("ready",r[2]),{c(){a=E("div"),Y(l.$$.fragment),this.h()},l(s){a=S(s,"DIV",{class:!0});var c=T(a);X(l.$$.fragment,c),c.forEach(p),this.h()},h(){v(a,"class","excalidraw-container svelte-z1m6he"),V(a,"hidden",r[1]!==r[12])},m(s,c){O(s,a,c),W(l,a,null),t=!0},p(s,c){(!t||c&2)&&V(a,"hidden",s[1]!==s[12])},i(s){t||(z(l.$$.fragment,s),t=!0)},o(s){B(l.$$.fragment,s),t=!1},d(s){s&&p(a),M(l)}}}function G(r){let a,l=r[10].id+"",t,s,c,b;function m(){return r[6](r[12])}return{c(){a=E("button"),t=te(l),this.h()},l(f){a=S(f,"BUTTON",{class:!0});var u=T(a);t=ee(u,l),u.forEach(p),this.h()},h(){v(a,"class",s="page-button "+(r[1]===r[12]?"active":"")+" svelte-z1m6he")},m(f,u){O(f,a,u),w(a,t),c||(b=D(a,"click",m),c=!0)},p(f,u){r=f,u&1&&l!==(l=r[10].id+"")&&Z(t,l),u&2&&s!==(s="page-button "+(r[1]===r[12]?"active":"")+" svelte-z1m6he")&&v(a,"class",s)},d(f){f&&p(a),c=!1,b()}}}function ae(r){let a,l,t,s,c,b="+",m,f,u,P="Export to PNG",C,x,d,_=y(r[0]),o=[];for(let n=0;n<_.length;n+=1)o[n]=q(j(r,_,n));const J=n=>B(o[n],1,1,()=>{o[n]=null});let N=y(r[0]),h=[];for(let n=0;n<N.length;n+=1)h[n]=G(R(r,N,n));return{c(){for(let n=0;n<o.length;n+=1)o[n].c();a=$(),l=E("nav"),t=E("div");for(let n=0;n<h.length;n+=1)h[n].c();s=$(),c=E("button"),c.textContent=b,m=$(),f=E("div"),u=E("button"),u.textContent=P,this.h()},l(n){for(let k=0;k<o.length;k+=1)o[k].l(n);a=U(n),l=S(n,"NAV",{class:!0});var i=T(l);t=S(i,"DIV",{class:!0});var e=T(t);for(let k=0;k<h.length;k+=1)h[k].l(e);s=U(e),c=S(e,"BUTTON",{class:!0,"data-svelte-h":!0}),A(c)!=="svelte-1dl0ud7"&&(c.textContent=b),e.forEach(p),m=U(i),f=S(i,"DIV",{class:!0});var g=T(f);u=S(g,"BUTTON",{class:!0,"data-svelte-h":!0}),A(u)!=="svelte-1vig5ao"&&(u.textContent=P),g.forEach(p),i.forEach(p),this.h()},h(){v(c,"class","svelte-z1m6he"),v(t,"class","pages"),v(u,"class","svelte-z1m6he"),v(f,"class","controls"),v(l,"class","svelte-z1m6he")},m(n,i){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,i);O(n,a,i),O(n,l,i),w(l,t);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(t,null);w(t,s),w(t,c),w(l,m),w(l,f),w(f,u),C=!0,x||(d=[D(c,"click",r[3]),D(u,"click",r[5])],x=!0)},p(n,[i]){if(i&7){_=y(n[0]);let e;for(e=0;e<_.length;e+=1){const g=j(n,_,e);o[e]?(o[e].p(g,i),z(o[e],1)):(o[e]=q(g),o[e].c(),z(o[e],1),o[e].m(a.parentNode,a))}for(ne(),e=_.length;e<o.length;e+=1)J(e);K()}if(i&19){N=y(n[0]);let e;for(e=0;e<N.length;e+=1){const g=R(n,N,e);h[e]?h[e].p(g,i):(h[e]=G(g),h[e].c(),h[e].m(t,s))}for(;e<h.length;e+=1)h[e].d(1);h.length=N.length}},i(n){if(!C){for(let i=0;i<_.length;i+=1)z(o[i]);C=!0}},o(n){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)B(o[i]);C=!1},d(n){n&&(p(a),p(l)),I(o,n),I(h,n),x=!1,H(d)}}}function se(r,a,l){let t,s=[{id:1,content:null}],c=0;function b(d){t=d.detail,m()}function m(){s[c].content?t.updateScene(JSON.parse(s[c].content)):t.updateScene({elements:[],appState:{}})}async function f(){if(t){const d=t.getSceneElements(),_=t.getAppState(),o={elements:d,appState:_};l(0,s[c].content=JSON.stringify(o),s),l(0,s)}}function u(){f(),l(0,s=[...s,{id:s.length+1,content:null}]),l(1,c=s.length-1)}function P(d){f(),l(1,c=d),m()}async function C(){if(t){const d=await t.exportToBlob({elements:t.getSceneElements(),mimeType:"image/png",appState:t.getAppState()}),_=window.URL.createObjectURL(d),o=document.createElement("a");o.href=_,o.download=`excalidraw-page-${c+1}.png`,o.click()}}return[s,c,b,u,P,C,d=>P(d)]}class ue extends L{constructor(a){super(),Q(this,a,se,ae,F,{})}}export{ue as component};
