import { c as create_ssr_component, a as subscribe, e as each, v as validate_component, d as escape } from "../../../chunks/ssr.js";
import { E as ExcaliDraw } from "../../../chunks/ExcaliDraw.js";
import { c as currentWhiteboardIndex } from "../../../chunks/whiteboard.js";
const css = {
  code: ".excalidraw-container.svelte-1swk1vj{height:calc(100vh - 50px);width:100%}.excalidraw-container > div{height:100%}.dropdown-menu{position:absolute;z-index:1000;border:none;min-width:10rem;margin:0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-clip:padding-box;border:1px solid rgba(0, 0, 0, .15);border-radius:.25rem}nav.svelte-1swk1vj{position:fixed;bottom:0;left:60px;right:0;height:50px;background-color:#f0f0f0;display:flex;align-items:center;padding:0 10px;box-sizing:border-box;justify-content:space-between}button.svelte-1swk1vj{margin-right:10px;padding:5px 10px;background-color:#007bff;color:white;border:none;border-radius:4px;cursor:pointer}button.svelte-1swk1vj:hover{background-color:#0056b3}.page-button.svelte-1swk1vj{background-color:#6c757d}.page-button.active.svelte-1swk1vj{background-color:#28a745}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script>\\n\\timport { onMount } from 'svelte';\\n\\timport ExcalidrawWrapper from '$lib/components/WhiteBoard/ExcaliDraw.svelte';\\n\\timport {currentWhiteboardIndex} from \\"$lib/stores/whiteboard\\";\\n\\n\\tlet excalidrawAPI;\\n\\tlet pages = [{ id: 1, content: null }];\\n\\n\\tfunction handleReady(event) {\\n\\t\\texcalidrawAPI = event.detail;\\n\\t\\tloadPageContent();\\n\\t}\\n\\n\\tfunction loadPageContent() {\\n\\t\\tif (pages[$currentWhiteboardIndex].content) {\\n\\t\\t\\texcalidrawAPI.updateScene(JSON.parse(pages[$currentWhiteboardIndex].content));\\n\\t\\t} else {\\n\\t\\t\\texcalidrawAPI.updateScene({ elements: [], appState: {} });\\n\\t\\t}\\n\\t}\\n\\n\\tasync function saveCurrentPage() {\\n\\t\\tif (excalidrawAPI) {\\n\\t\\t\\tconst elements = excalidrawAPI.getSceneElements();\\n\\t\\t\\tconst appState = excalidrawAPI.getAppState();\\n\\t\\t\\tconst scene = { elements, appState };\\n\\t\\t\\tpages[$currentWhiteboardIndex].content = JSON.stringify(scene);\\n\\t\\t\\tpages = pages;\\n\\t\\t}\\n\\t}\\n\\n\\tfunction addNewPage() {\\n\\t\\tsaveCurrentPage();\\n\\t\\tpages = [...pages, { id: pages.length + 1, content: null }];\\n\\t\\tcurrentWhiteboardIndex.set(pages.length - 1);\\n\\t}\\n\\n\\tfunction switchPage(index) {\\n\\t\\tsaveCurrentPage();\\n\\t\\tcurrentWhiteboardIndex.set(index);\\n\\t\\tloadPageContent();\\n\\t}\\n\\n\\tasync function exportToPNG() {\\n\\t\\tif (excalidrawAPI) {\\n\\t\\t\\tconst blob = await excalidrawAPI.exportToBlob({\\n\\t\\t\\t\\telements: excalidrawAPI.getSceneElements(),\\n\\t\\t\\t\\tmimeType: 'image/png',\\n\\t\\t\\t\\tappState: excalidrawAPI.getAppState()\\n\\t\\t\\t});\\n\\t\\t\\tconst url = window.URL.createObjectURL(blob);\\n\\t\\t\\tconst link = document.createElement('a');\\n\\t\\t\\tlink.href = url;\\n\\t\\t\\tlink.download = \`excalidraw-page-\${$currentWhiteboardIndex + 1}.png\`;\\n\\t\\t\\tlink.click();\\n\\t\\t}\\n\\t}\\n<\/script>\\n\\n{#each pages as page, index}\\n\\t<div class=\\"excalidraw-container\\" class:hidden={$currentWhiteboardIndex !== index}>\\n\\t\\t<ExcalidrawWrapper {index} on:ready={handleReady} />\\n\\t</div>\\n{/each}\\n\\n<nav>\\n\\t<div class=\\"pages\\">\\n\\t\\t{#each pages as page, index}\\n\\t\\t\\t<button\\n\\t\\t\\t\\tclass=\\"page-button {$currentWhiteboardIndex === index ? 'active' : ''}\\"\\n\\t\\t\\t\\ton:click={() => switchPage(index)}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{page.id}\\n\\t\\t\\t</button>\\n\\t\\t{/each}\\n\\t\\t<button on:click={addNewPage}>+</button>\\n\\t</div>\\n\\t<div class=\\"controls\\">\\n\\t\\t<!-- <button on:click={exportToPNG}>Export to PNG</button> -->\\n\\t</div>\\n</nav>\\n\\n<style>\\n\\t.excalidraw-container {\\n\\t\\theight: calc(100vh - 50px);\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t:global(.excalidraw-container > div) {\\n\\t\\theight: 100%;\\n\\t}\\n\\n\\t:global(.dropdown-menu) {\\n\\t\\tposition: absolute;\\n\\t\\tz-index: 1000;\\n\\t\\t/* display: none; */\\n\\t\\tborder: none;\\n\\t\\tmin-width: 10rem;\\n\\t\\t/* padding: .5rem 0; */\\n\\t\\tmargin: 0;\\n\\t\\tfont-size: 1rem;\\n\\t\\tcolor: #212529;\\n\\t\\ttext-align: left;\\n\\t\\tlist-style: none;\\n\\t\\t/* background-color: #fff; */\\n\\t\\tbackground-clip: padding-box;\\n\\t\\tborder: 1px solid rgba(0, 0, 0, .15);\\n\\t\\tborder-radius: .25rem;\\n\\t}\\n\\n\\tnav {\\n\\t\\tposition: fixed;\\n\\t\\tbottom: 0;\\n\\t\\tleft: 60px;\\n\\t\\tright: 0;\\n\\t\\theight: 50px;\\n\\t\\tbackground-color: #f0f0f0;\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tpadding: 0 10px;\\n\\t\\tbox-sizing: border-box;\\n\\t\\tjustify-content: space-between;\\n\\t}\\n\\n\\tbutton {\\n\\t\\tmargin-right: 10px;\\n\\t\\tpadding: 5px 10px;\\n\\t\\tbackground-color: #007bff;\\n\\t\\tcolor: white;\\n\\t\\tborder: none;\\n\\t\\tborder-radius: 4px;\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\tbutton:hover {\\n\\t\\tbackground-color: #0056b3;\\n\\t}\\n\\n\\t.page-button {\\n\\t\\tbackground-color: #6c757d;\\n\\t}\\n\\n\\t.page-button.active {\\n\\t\\tbackground-color: #28a745;\\n\\t}\\n</style>\\n"],"names":[],"mappings":"AAmFC,oCAAsB,CACrB,MAAM,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAC1B,KAAK,CAAE,IACR,CAEQ,2BAA6B,CACpC,MAAM,CAAE,IACT,CAEQ,cAAgB,CACvB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,IAAI,CAEb,MAAM,CAAE,IAAI,CACZ,SAAS,CAAE,KAAK,CAEhB,MAAM,CAAE,CAAC,CACT,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,IAAI,CAEhB,eAAe,CAAE,WAAW,CAC5B,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACpC,aAAa,CAAE,MAChB,CAEA,kBAAI,CACH,QAAQ,CAAE,KAAK,CACf,MAAM,CAAE,CAAC,CACT,IAAI,CAAE,IAAI,CACV,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,OAAO,CACzB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,UAAU,CAAE,UAAU,CACtB,eAAe,CAAE,aAClB,CAEA,qBAAO,CACN,YAAY,CAAE,IAAI,CAClB,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OACT,CAEA,qBAAM,MAAO,CACZ,gBAAgB,CAAE,OACnB,CAEA,2BAAa,CACZ,gBAAgB,CAAE,OACnB,CAEA,YAAY,sBAAQ,CACnB,gBAAgB,CAAE,OACnB"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $currentWhiteboardIndex, $$unsubscribe_currentWhiteboardIndex;
  $$unsubscribe_currentWhiteboardIndex = subscribe(currentWhiteboardIndex, (value) => $currentWhiteboardIndex = value);
  let pages = [{ id: 1, content: null }];
  $$result.css.add(css);
  $$unsubscribe_currentWhiteboardIndex();
  return `${each(pages, (page, index) => {
    return `<div class="${[
      "excalidraw-container svelte-1swk1vj",
      $currentWhiteboardIndex !== index ? "hidden" : ""
    ].join(" ").trim()}">${validate_component(ExcaliDraw, "ExcalidrawWrapper").$$render($$result, { index }, {}, {})} </div>`;
  })} <nav class="svelte-1swk1vj"><div class="pages">${each(pages, (page, index) => {
    return `<button class="${"page-button " + escape($currentWhiteboardIndex === index ? "active" : "", true) + " svelte-1swk1vj"}">${escape(page.id)} </button>`;
  })} <button class="svelte-1swk1vj" data-svelte-h="svelte-1dl0ud7">+</button></div> <div class="controls" data-svelte-h="svelte-1cazx0"></div> </nav>`;
});
export {
  Page as default
};
